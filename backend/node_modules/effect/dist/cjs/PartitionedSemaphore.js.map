{"version":3,"file":"PartitionedSemaphore.js","names":["Effect","_interopRequireWildcard","require","Iterable","MutableHashMap","Option","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","default","has","get","set","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","TypeId","exports","makeUnsafe","options","maxPermits","Math","max","permits","Number","isFinite","withPermits","effect","totalPermits","waitingPermits","partitions","empty","take","key","async","resume","never","void","needed","taken","waiters","getOrElse","Set","entry","cleanup","delete","size","remove","add","sync","releaseUnsafe","iterator","Symbol","state","next","done","unsafeHead","value","takePermits","release","matchCauseEffect","onFailure","cause","failCause","onSuccess","succeed","uninterruptibleMask","restore","flatMap","make"],"sources":["../../src/PartitionedSemaphore.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}